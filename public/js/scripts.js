(function e(t,n,a){function i(r,l){if(!n[r]){if(!t[r]){var s=typeof require=="function"&&require;if(!l&&s)return s(r,!0);if(o)return o(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[r]={exports:{}};t[r][0].call(d.exports,function(e){var n=t[r][1][e];return i(n?n:e)},d,d.exports,e,t,n,a)}return n[r].exports}var o=typeof require=="function"&&require;for(var r=0;r<a.length;r++)i(a[r]);return i})({1:[function(e,n,a){$(function(){var e=0;var n=[];var a=[];var o={};var r=[];var s;var c=0;var d;var u;var f={};var p="ENTER_NAME";const m=20;const g=700;const h=1e3;const v=15;const w=50;const y="/game/new";var T=$(".game-container").width();var M=$(".game-container").height();var C=80;var N=83;var A=10;var E=90;var L=10;var b=0;$(".test-score").click(function(){$.post("/score",{score:30},function(e){console.log(e)})});$(document).on("click",".play-again",function(e){if(p=="GAME_ENDED"){D()}});$(document).on("click","tr",function(e){id=$(this).data("gameid");if(p=="GAME_ENDED"&&!$(this).hasClass("hasPlayed")){D(id)}});$(document).on("click",".start-game",function(e){P()});$(document).bind("keydown",function(e){if(e.which==13){P()}if(p=="IN_GAME"){if(e.which!=8){char=String.fromCharCode(e.which).toLowerCase();X(char)}else{e.preventDefault();K()}}});function I(e,t){$.get("/game/id/"+e,function(e){n=e.game;u=e.id;console.log(u,n);t()})}function x(e){$.get(y,function(t){n=t.game;u=t.id;console.log(u,n);e()})}function P(){if(p=="ENTER_NAME"){p="COUNTDOWN";$(".start-game-container").animate({top:"-100",opacity:0},600,"easeInBack",function(){$(".start-game-container").hide();x(S)})}}function S(){$(".countdown-container").fadeIn();k()}function k(){setTimeout(function(){$(".countdown-3").addClass("countdown-transition")},g);setTimeout(function(){$(".countdown-2").addClass("countdown-transition")},g*2);setTimeout(function(){$(".countdown-1").addClass("countdown-transition");setTimeout(function(){$(".countdown-container").hide();O()},g)},g*3)}function D(t){t=t||"";e=0;n=[];a=[];o={};r=[];s;c=0;$(".countdown-1").removeClass("countdown-transition");$(".countdown-2").removeClass("countdown-transition");$(".countdown-3").removeClass("countdown-transition");if(p=="GAME_ENDED"){$(".game-container *").fadeOut();if(t==""){setTimeout(function(){$(".game-container *").remove();$(".game-container").hide();x(S)},400)}else{setTimeout(function(){$(".game-container *").remove();$(".game-container").hide();I(t,S)},400)}}}function O(){r=[];U(n[0][0],n[0][1]);c=v;$(".timer").text(c);b=0;s=setInterval(function(){B()},1e3);p="IN_GAME"}function _(){$(".cover").show();$(".cover").css({width:0,height:0,bottom:70,backgroundColor:"#CCC7BF"});$(".cover").animate({width:"2000px",height:"2000px",bottom:"-1000px",backgroundColor:"#fff"},1e3,"easeInOutQuad",function(){p="GAME_ENDED";console.log(e,n[e]);G();$(".timer-container").hide();H();$(".cover").hide()})}function G(){$(".game-container .letter-tile").remove();$(".game-container .wordbank-placemat").remove();$(".game-container .player-placemat").remove();$(".game-container .hint-container").remove();$(".game-container .plus-tile-placemat").remove()}function H(){console.log("solvedwords",r);var t=0;var a=0;var o=r.length;for(i in r){t=Math.max(r[i][0].length,t)}if(d===undefined||d>0){t=Math.max(n[e][0].length,t);o+=1}for(i in r){wordRound=r[i];for(j in wordRound[0]){letter=wordRound[0][j];$letter=$('<div id="mini-'+i+"-"+j+'" class="mini-letter-tile">'+letter+"</div>");$letter.css({top:i*30,left:j*25});$(".game-container").append($letter)}singleLetterFound=false;for(j in wordRound[2]){letter=wordRound[2][j];$letter=$('<div class="mini-letter-tile">'+letter+"</div>");$letter.css({top:i*30,left:j*25+(t+1)*25});if(j>1){$letter.attr("id","scoring-"+a);a++}if(letter==wordRound[1]&&!singleLetterFound){singleLetterFound=true;$letter.addClass("highlight")}$(".game-container").append($letter)}}if(d==undefined||d>0){var l=n[e];var s=r.length;for(j in l[0]){letter=l[0][j];$letter=$('<div id="mini-'+i+"-"+j+'" class="mini-letter-tile mini-letter-tile-unsolved">'+letter+"</div>");$letter.css({top:s*30,left:j*25});$(".game-container").append($letter)}singleLetterFound=false;for(j in l[2]){letter=l[2][j];$letter=$('<div class="mini-letter-tile mini-letter-tile-unsolved">'+letter+"</div>");$letter.css({top:s*30,left:j*25+(t+1)*25});if(letter==l[1]&&!singleLetterFound){singleLetterFound=true;$letter.addClass("highlight")}$(".game-container").append($letter)}}function c(e){$("#scoring-"+e).animate({opacity:0},100,function(){$(this).animate({opacity:1},100)});$(".final-score-container").text(e);if(e<a){e++;setTimeout(function(){c(e)},w)}}$(".mini-letter-tile").fadeIn();setTimeout(function(){c(0)},500);$fsc=$('<div class="final-score-caption">final score: <span class="final-score-container">0</span></div>');$fsc.css({top:o*30+20,left:0});$fsc.find(".final-score-container").text("0");$fsc.fadeIn();$(".game-container").append($fsc);$playAgainBtn=$('<div class="play-again">play again</div>').hide();$playAgainBtn.css({top:o*30+68,left:-5});$(".game-container").append($playAgainBtn);$playAgainBtn.fadeIn();$highscore=$('<div class="highscore-container"></div>');$highscore.append("<h3>highscores</h3>");$highscoreTable=$("<table></table>");gameID="";$.post("/score",{score:a,game_id:u},function(){$.get("/scores",function(e){userGameScores=e.user.games;for(i in e.scores){row=e.scores[i];playerName=row.user.firstName+" "+row.user.lastInitial+".";gameid=row.game_id;if(row.user.id==e.user.id){rowHTML='<tr class="hasPlayed" data-gameid="'+gameid+'" data-playername="'+playerName+'"><td class="score">'+row.score+"</td>";rowHTML+="<td>"+playerName+"</td>";rowHTML+="<td></td></tr>"}else if(userGameScores[gameid]==undefined){rowHTML='<tr data-gameid="'+gameid+'" data-playername="'+playerName+'"><td class="score">'+row.score+"</td>";rowHTML+="<td>"+playerName+"</td>";rowHTML+='<td><div class="replay-game-id-btn">load game</div></td></tr>'}else{rowHTML='<tr class="hasPlayed" data-gameid="'+gameid+'" data-playername="'+playerName+'"><td class="score">'+row.score+"</td>";rowHTML+="<td>"+playerName+"</td>";rowHTML+='<td><div class="your-score-badge">your score: '+userGameScores[gameid]+"</div></td></tr>"}$highscoreTable.append(rowHTML)}$highscore.append($highscoreTable);$(".game-container").append($highscore);$highscore.css({top:0,left:Math.max((t*2+4)*25,250)});$highscore.fadeIn(300)})})}function B(){c--;if(c<0){c=0;_();clearInterval(s)}else{b++;F();$(".timer").text(c)}}function F(){solution=n[e][2];for(i=0;i<solution.length;i++){if(b==i*3+6){hintLetter=solution.substr(i,1);rLeft=$("#pp"+i).position().left;rTop=$("#pp"+i).position().top+N+10;$hint=$('<div class="hint-container">'+hintLetter+"</div>");$hint.css({left:rLeft,top:rTop,display:"none"});$(".game-container").append($hint);$hint.fadeIn(300)}}}function R(e,t,n,a){$tile=$('<span class="letter-tile">'+e+"</span>");rTop=Math.random()*200+100+t;rLeft=(Math.random()*200+100)*(Math.random()<.5?-1:1)+n;$tile.css({top:rTop,left:rLeft,opacity:0}).animate({top:t,left:n,opacity:1},700,"easeOutExpo");o[a]={t:e,l:"BANK",sx:n,sy:t,id:a};return $tile}function X(e){placematPosition=$("#pp"+a.length).position();for(i in o){if(o[i].t==e&&o[i].l=="BANK"){o[i].l="PLACEMAT";$("#t"+i).stop().css({opacity:1}).animate({left:placematPosition.left+5,top:placematPosition.top-4},100);a.push(o[i]);break}}if(a.length==Object.keys(o).length){q()}}function Y(e){l=(Math.random()*50+50)*(Math.random()<.5?-1:1);t=(Math.random()*50+50)*(Math.random()<.5?-1:1);e.animate({top:e.position().top+t,left:e.position().left+l,opacity:0},300,"easeInQuad")}function q(){userWord=a.map(function(e){return e.t}).join("");if(f[userWord]!==undefined){$(".game-container .player-placemat").animate({backgroundColor:"#6FD06C"},100);setTimeout(function(){$.each($(".game-container .letter-tile"),function(){Y($(this))});$(".game-container .wordbank-placemat").fadeOut();$(".game-container .player-placemat").fadeOut();$(".game-container .hint-container").fadeOut();$(".game-container .plus-tile-placemat").fadeOut();setTimeout(function(){G();W()},400)},400);a=[];d=c;r.push([n[e][0],n[e][1],userWord]);e++;b=0}}function W(){o={};a=[];if(p=="IN_GAME"){U(n[e][0],n[e][1])}}function K(){if(a.length>0){removeChar=a.pop();o[removeChar.id].l="BANK";$("#t"+removeChar.id).animate({left:removeChar.sx,top:removeChar.sy},100)}}function U(e,t){lettersArr=e.split("");$(".timer-container").fadeIn();for(i=0;i<lettersArr.length+1;i++){playerPlacematX=T/2-((lettersArr.length+1)*(E+L)-L)/2+i*(E+L);playerPlacematY=250;$playerPlacemat=$('<div id="pp'+i+'" class="player-placemat"></div>').css({left:playerPlacematX,top:playerPlacematY});$(".game-container").append($playerPlacemat)}for(i in lettersArr){letter=lettersArr[i];letterStartX=T/2-(lettersArr.length*(C+A)-A)/2+i*(C+A);letterStartY=130;$tile=R(letter,letterStartY,letterStartX,i);$wordbankPlacemat=$('<div class="wordbank-placemat"></div>').css({left:letterStartX,top:letterStartY});$tile.attr("id","t"+i);$(".game-container").append($wordbankPlacemat).append($tile)}plusStartX=T/2-C/2;plusStartY=0;$plusTile=R(t,plusStartY,plusStartX,lettersArr.length).attr("id","t"+lettersArr.length);$plusTilePlacemat=$('<div class="plus-tile-placemat"></div>').css({left:plusStartX-5,top:plusStartY+4}).fadeIn();$(".game-container").append($plusTilePlacemat).append($plusTile).show()}function Q(e){$.getJSON("/data/dictionary.json",function(t){e(t)})}function J(){Q(function(e){f=e})}J()})},{}]},{},[1]);